// blocklyInterop.js

window.initializeBlockly = function (blocklyDivId, toolboxId) {
    const workspace = Blockly.inject(blocklyDivId, {
        toolbox: document.getElementById(toolboxId),
        grid: { spacing: 25, length: 3, colour: '#ccc', snap: true },
        zoom: { controls: true, wheel: true },
    });

    // Add a sample variable programmatically
    workspace.createVariable('variableName');

    // Optionally, attach event handlers, such as saving the workspace, or extracting code
    workspace.addChangeListener(function (event) {
        if (event.type === Blockly.Events.BLOCK_CREATE) {
            console.log('A new block was created');
        }
    });
};

// This function will be used to extract the code generated by the blocks in Blockly
window.getBlocklyCode = function () {
    const workspace = Blockly.getMainWorkspace();
    const code = Blockly.JavaScript.workspaceToCode(workspace);
    return code;
};

// You can create more JavaScript functions to interact with Blockly, such as adding variables, setting values, etc.
